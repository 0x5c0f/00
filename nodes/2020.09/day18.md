# IPTABLES 
## DROP 和 REJECT 的区别 
- `REJECT`动作会返回一个拒绝(终止)数据包(`TCP FIN`或`UDP-ICMP-PORT-UNREACHABLE`)，明确的拒绝对方的连接动作。
- `DROP`动作只是简单的直接丢弃数据，并不反馈任何回应。需要`Client`等待超时，`Client`容易发现自己被防火墙所阻挡。


## 个人整理的一个安全防范脚本 
[scripts/iptables.sh]("../../scripts/iptables.sh") 


# 常见状态码
```bash
一些常见HTTP状态码为：
200 – 服务器成功返回网页
404 – 请求的网页不存在
503 – 服务不可用

常见HTTP状态码大全

1xx（临时响应）
表示临时响应并需要请求者继续执行操作的状态代码。

代码 说明
http状态码 100 （继续） 请求者应当继续提出请求。 服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。
http状态码 101 （切换协议） 请求者已要求服务器切换协议，服务器已确认并准备切换。

2xx （成功）
表示成功处理了请求的状态代码。
代码 说明
http状态码 200 （成功） 服务器已成功处理了请求。 通常，这表示服务器提供了请求的网页。
http状态码 201 （已创建） 请求成功并且服务器创建了新的资源。
http状态码 202 （已接受） 服务器已接受请求，但尚未处理。
http状态码 203 （非授权信息） 服务器已成功处理了请求，但返回的信息可能来自另一来源。
http状态码 204 （无内容） 服务器成功处理了请求，但没有返回任何内容。
http状态码 205 （重置内容） 服务器成功处理了请求，但没有返回任何内容。
http状态码 206 （部分内容） 服务器成功处理了部分 GET 请求。

3xx （重定向）
表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。

代码 说明
http状态码 300 （多种选择） 针对请求，服务器可执行多种操作。 服务器可根据请求者 (user agent) 选择一项操作，或提供操作列表供请求者选择。
http状态码 301 （永久移动） 请求的网页已永久移动到新位置。 服务器返回此响应（对 GET 或 HEAD 请求的响应）时，会自动将请求者转到新位置。
http状态码 302 （临时移动） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。
http状态码 303 （查看其他位置） 请求者应当对不同的位置使用单独的 GET 请求来检索响应时，服务器返回此代码。
http状态码 304 （未修改） 自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。
http状态码 305 （使用代理） 请求者只能使用代理访问请求的网页。 如果服务器返回此响应，还表示请求者应使用代理。
http状态码 307 （临时重定向） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。

4xx（请求错误）
这些状态代码表示请求可能出错，妨碍了服务器的处理。

代码 说明
http状态码 400 （错误请求） 服务器不理解请求的语法。
http状态码 401 （未授权） 请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。
http状态码 403 （禁止） 服务器拒绝请求。
http状态码 404 （未找到） 服务器找不到请求的网页。
http状态码 405 （方法禁用） 禁用请求中指定的方法。
http状态码 406 （不接受） 无法使用请求的内容特性响应请求的网页。
http状态码 407 （需要代理授权） 此状态代码与 401（未授权）类似，但指定请求者应当授权使用代理。
http状态码 408 （请求超时） 服务器等候请求时发生超时。
http状态码 409 （冲突） 服务器在完成请求时发生冲突。 服务器必须在响应中包含有关冲突的信息。
http状态码 410 （已删除） 如果请求的资源已永久删除，服务器就会返回此响应。
http状态码 411 （需要有效长度） 服务器不接受不含有效内容长度标头字段的请求。
http状态码 412 （未满足前提条件） 服务器未满足请求者在请求中设置的其中一个前提条件。
http状态码 413 （请求实体过大） 服务器无法处理请求，因为请求实体过大，超出服务器的处理能力。
http状态码 414 （请求的 URI 过长） 请求的 URI（通常为网址）过长，服务器无法处理。
http状态码 415 （不支持的媒体类型） 请求的格式不受请求页面的支持。
http状态码 416 （请求范围不符合要求） 如果页面无法提供请求的范围，则服务器会返回此状态代码。
http状态码 417 （未满足期望值） 服务器未满足”期望”请求标头字段的要求。

5xx（服务器错误）
这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。

代码 说明
http状态码 500 （服务器内部错误） 服务器遇到错误，无法完成请求。
{
    原因1：伪静态规则不正确
    解决办法：
    修改伪静态。
    原因2：php版本与网站程序不兼容
    解决办法：
    更换PHP版本。
    原因3：网站无法连接至数据库
    解决办法：
    正确修改站点的数据库配置文件。
    原因4：php禁用了某一函数，需要开启
    解决办法：
    开启相关禁用函数。
    原因5：站点需要访问站外目录
    解决办法：
    关闭防跨站处理。
    原因6：源码本身有BUG
    解决办法：
    修复源码bug。
}
http状态码 501 （尚未实施） 服务器不具备完成请求的功能。 例如，服务器无法识别请求方法时可能会返回此代码。
http状态码 502 （错误网关） 服务器作为网关或代理，从上游服务器收到无效响应。
{
    原因1：DNS 缓冲
    解决办法：
    在dos窗口运行 ipconfig /flushdns，该命令会刷新DNS缓冲。
    原因2：浏览器代理
    解决办法：
    关掉代理。
    原因3：dns 被劫持了，即使使用国外的dns，也会被劫持
    解决办法：
    去掉VPN服务器的DNS。切换另外的dns。在windows系统中，可以在本地网络连接的属性中，去掉默认的dns，选用国外的dns，比如google的或opendns。
    原因4：php执行超时
    解决办法：
    修改/usr/local/php/etc/php.ini 将max_execution_time 改为300。
    原因5：nginx等待时间超时
    解决办法：
    适当增加nginx.conf配置文件中FastCGI的timeout时间
}
http状态码 503 （服务不可用） 服务器目前无法使用（由于超载或停机维护）。 通常，这只是暂时状态。一般为进程瞬时请求量过大，无法及时处理导致 
{
    原因1：服务不可用状态
    解决办法：
    服务器或许就是正在维护或者暂停了，你可以联系一下服务器空间商。
    原因2：程序占用资源太多
    解决办法：
    通过设置应用程序池把账户改为NetworkService即可解决。
}
http状态码 504 （网关超时） 服务器作为网关或代理，但是没有及时从上游服务器收到请求。一般为进程阻塞超时导致。
{
    原因1：后端电脑之间 IP 通讯缓慢而产生
    解决办法：
    如果您的 Web 服务器由某一网站托管， 只有负责那个网站设置的人员才能解决这个问题。
    原因2：由于nginx默认的fastcgi进程响应的缓冲区太小造成的错误
    解决办法：
    一般默认的fastcgi进程响应的缓冲区是8K，这时可以设置大一点，在nginx.conf里，加入：fastcgi_buffers 8 128k这表示设置fastcgi缓冲区为8块128k大小的空间。当然如果在进行某一项即时的操作, 可能需要nginx的超时参数调大点, 例如设置成60秒:send_timeout 60; 经过这两个参数的调整，一般不会再提示“504 Gateway Time-out”错误，问题基本解决。
    原因3：PHP环境的配置问题
    解决办法：
    更改php-fpm的几处配置： 把max_children由之前的10改为现在的30，这样就可以保证有充足的php-cgi进程可以被使用； 把request_terminate_timeout由之前的0s改为60s，这样php-cgi进程 处理脚本的超时时间就是60秒，可以防止进程都被挂起，提高利用效率。 接着再更改nginx的几个配置项，减少FastCGI的请求次数，尽量维持buffers不变： fastcgi_buffers由 4 64k 改为 2 256k； fastcgi_buffer_size 由 64k 改为 128K； fastcgi_busy_buffers_size 由 128K 改为 256K； fastcgi_temp_file_write_size 由 128K 改为 256K。 重新加载php-fpm和nginx的配置，再次测试，如果没有出现“504 Gateway Time-out”错误，问题解决。
}
http状态码 505 （HTTP 版本不受支持） 服务器不支持请求中所用的 HTTP 协议版本。
{
    原因1：您的 Web 服务器不支持，或拒绝支持客户端（如您的浏览器）在发送给服务器的 HTTP 请求数据流中指定的 HTTP 协议版本
    解决办法：
    升级您的 Web 服务器软件。
    原因2：http请求格式的错误
    解决办法：
    对照一下自己的代码，从打印的信息中终于找到问题所在。可能在请求后面多加了一个空格。http协议真是很严格了。
}
```